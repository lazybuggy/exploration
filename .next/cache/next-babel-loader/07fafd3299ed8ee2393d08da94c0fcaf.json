{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n//import fetch from 'isomorphic-unfetch';\nimport Scenario from '../components/Scenario';\nimport Choices from '../components/Choices';\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport '../css/index.css';\nimport '../fonts/Populationzerobb-ZDXK.otf';\nimport '../fonts/Scorchedearth-4Ljp.otf';\n\nvar Page = function Page(props) {\n  var lastSavedScenario = \"5d88d9091c9d4400003c6bce\";\n\n  if (props.user) {\n    lastSavedScenario = props.user.savedPoint;\n  }\n\n  var _useState = useState(lastSavedScenario),\n      scenarioId = _useState[0],\n      setScenarioId = _useState[1];\n\n  function saveProgress() {\n    return _saveProgress.apply(this, arguments);\n  }\n\n  function _saveProgress() {\n    _saveProgress = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"http://localhost:3000/api/users/\" + props.user.username, {\n                method: 'PUT',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: _JSON$stringify({\n                  savedPoint: scenarioId\n                })\n              }).then(\n              /*#__PURE__*/\n              function () {\n                var _ref = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee(res) {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          alert(\"Progress Successfully saved\");\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _saveProgress.apply(this, arguments);\n  }\n\n  ;\n\n  function signOut() {\n    setScenarioId(\"5d88d9091c9d4400003c6bce\");\n  }\n\n  ;\n  return __jsx(\"div\", {\n    className: \"fill\"\n  }, __jsx(\"div\", {\n    className: \"nav\"\n  }, props.user ? __jsx(\"div\", {\n    className: \"navContent\"\n  }, __jsx(\"h2\", null, \"Signed in as \", props.user.firstName), __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    onClick: signOut\n  }, \"Sign Out\")), __jsx(\"button\", {\n    onClick: saveProgress\n  }, \"Save Progress\")) : __jsx(\"div\", {\n    className: \"navContent\"\n  }, __jsx(Link, {\n    href: \"/login\"\n  }, __jsx(\"a\", null, \"Log In\")), __jsx(Link, {\n    href: \"/signup\"\n  }, __jsx(\"a\", null, \"Sign Up\")))), __jsx(\"div\", {\n    className: \"content\"\n  }, __jsx(\"div\", {\n    className: \"inner\"\n  }, __jsx(Scenario, {\n    scenarioId: scenarioId,\n    setScenarioId: setScenarioId\n  }))));\n};\n\nPage.getInitialProps = function (_ref2) {\n  var query = _ref2.query;\n  var user;\n\n  if (query && query.user) {\n    user = JSON.parse(query.user);\n  } else {\n    user = null;\n  }\n\n  return {\n    user: user\n  };\n};\n\nexport default Page;","map":{"version":3,"sources":["/Users/luciaokeh/Documents/exploration/pages/index.js"],"names":["Scenario","Choices","useState","Link","Page","props","lastSavedScenario","user","savedPoint","scenarioId","setScenarioId","saveProgress","fetch","username","method","headers","body","then","res","alert","signOut","firstName","getInitialProps","query","JSON","parse"],"mappings":";;;;;AAAA;AACA,OAAOA,QAAP,MAAqB,wBAArB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAAQC,QAAR,QAAuB,OAAvB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,OAAO,kBAAP;AACA,OAAO,oCAAP;AACA,OAAO,iCAAP;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AACtB,MAAIC,iBAAiB,GAAG,0BAAxB;;AACA,MAAGD,KAAK,CAACE,IAAT,EAAc;AACZD,IAAAA,iBAAiB,GAAGD,KAAK,CAACE,IAAN,CAAWC,UAA/B;AACD;;AAJqB,kBAMcN,QAAQ,CAACI,iBAAD,CANtB;AAAA,MAMfG,UANe;AAAA,MAMHC,aANG;;AAAA,WAQPC,YARO;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,6BAQtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACQC,KAAK,CAAC,qCAAmCP,KAAK,CAACE,IAAN,CAAWM,QAA/C,EAAyD;AAClEC,gBAAAA,MAAM,EAAE,KAD0D;AAElEC,gBAAAA,OAAO,EAAE;AACP,kCAAgB;AADT,iBAFyD;AAKlEC,gBAAAA,IAAI,EAAE,gBAAe;AACrBR,kBAAAA,UAAU,EAAEC;AADS,iBAAf;AAL4D,eAAzD,CAAL,CAQHQ,IARG;AAAA;AAAA;AAAA;AAAA;AAAA,yCAQE,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AACNC,0BAAAA,KAAK,CAAC,6BAAD,CAAL;;AADM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARF;;AAAA;AAAA;AAAA;AAAA,kBADR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KARsB;AAAA;AAAA;;AAoBrB;;AAED,WAASC,OAAT,GAAkB;AAChBV,IAAAA,aAAa,CAAC,0BAAD,CAAb;AACD;;AAAA;AAED,SAAO;AAAK,IAAA,SAAS,EAAC;AAAf,KACL;AAAK,IAAA,SAAS,EAAC;AAAf,KACCL,KAAK,CAACE,IAAN,GACK;AAAK,IAAA,SAAS,EAAC;AAAf,KACA,mCAAkBF,KAAK,CAACE,IAAN,CAAWc,SAA7B,CADA,EAEA,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KAAe;AAAG,IAAA,OAAO,EAAED;AAAZ,gBAAf,CAFA,EAGA;AAAQ,IAAA,OAAO,EAAET;AAAjB,qBAHA,CADL,GAMK;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KAAoB,0BAApB,CADF,EAEE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC;AAAX,KAAqB,2BAArB,CAFF,CAPN,CADK,EAeL;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,MAAC,QAAD;AAAU,IAAA,UAAU,EAAEF,UAAtB;AAAkC,IAAA,aAAa,EAAEC;AAAjD,IADF,CADF,CAfK,CAAP;AAsBD,CAhDD;;AAkDAN,IAAI,CAACkB,eAAL,GAAuB,iBAAa;AAAA,MAAXC,KAAW,SAAXA,KAAW;AAClC,MAAIhB,IAAJ;;AACA,MAAGgB,KAAK,IAAIA,KAAK,CAAChB,IAAlB,EAAuB;AACrBA,IAAAA,IAAI,GAAGiB,IAAI,CAACC,KAAL,CAAWF,KAAK,CAAChB,IAAjB,CAAP;AACD,GAFD,MAEK;AACHA,IAAAA,IAAI,GAAE,IAAN;AACD;;AACD,SAAO;AAACA,IAAAA,IAAI,EAAJA;AAAD,GAAP;AACD,CARD;;AAUA,eAAeH,IAAf","sourcesContent":["//import fetch from 'isomorphic-unfetch';\nimport Scenario from '../components/Scenario';\nimport Choices from '../components/Choices';\nimport {useState} from 'react';\nimport Link from 'next/link'\n\nimport '../css/index.css';\nimport '../fonts/Populationzerobb-ZDXK.otf';\nimport '../fonts/Scorchedearth-4Ljp.otf';\n\nconst Page = (props) => {\n  var lastSavedScenario = \"5d88d9091c9d4400003c6bce\";\n  if(props.user){\n    lastSavedScenario = props.user.savedPoint;\n  }\n\n  const [scenarioId, setScenarioId] = useState(lastSavedScenario);\n\n  async function saveProgress(){\n    await fetch(\"http://localhost:3000/api/users/\"+props.user.username, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n      savedPoint: scenarioId,\n      })\n    }).then(async (res) => {\n      alert(\"Progress Successfully saved\")\n    });\n  };\n\n  function signOut(){\n    setScenarioId(\"5d88d9091c9d4400003c6bce\");\n  };\n\n  return <div className=\"fill\">\n    <div className=\"nav\">\n    {props.user  \n        ? <div className=\"navContent\">\n          <h2>Signed in as {props.user.firstName}</h2>\n          <Link href=\"/\"><a onClick={signOut}>Sign Out</a></Link>\n          <button onClick={saveProgress}>Save Progress</button>\n          </div>\n        : <div className=\"navContent\">\n            <Link href=\"/login\"><a>Log In</a></Link>\n            <Link href=\"/signup\"><a>Sign Up</a></Link>\n          </div>\n       }\n    </div>\n    {/* <div className=\"background\"/> */}\n    <div className=\"content\">\n      <div className=\"inner\">\n        <Scenario scenarioId={scenarioId} setScenarioId={setScenarioId}  />\n      {/* <Choices scenarioId={scenarioId} setScenarioId={setScenarioId} /> */}\n      </div>\n    </div>\n  </div>\n};\n\nPage.getInitialProps = ({query}) => {\n  var user;\n  if(query && query.user){\n    user = JSON.parse(query.user);\n  }else{\n    user= null; \n  }\n  return {user};\n}\n\nexport default Page;\n\n"]},"metadata":{},"sourceType":"module"}